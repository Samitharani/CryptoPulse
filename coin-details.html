<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CryptoPulse â€” Coin Details</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="coin-details.css">
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">
    CryptoPulse
    <div class="subtitle">AI-Powered Predictions</div>
  </div>

  <ul class="nav-links">
    <li><a href="index.html" class="nav-item">Dashboard</a></li>
    <li><a href="coin-details.html" class="nav-item active">Coin Details</a></li>
    <li><a href="predictions.html" class="nav-item">Predictions</a></li>
    <li><a href="compare.html" class="nav-item">Compare</a></li>
    <li><a href="about.html" class="nav-item">About</a></li>
    <li><a href="#" class="logout-btn" id="logoutBtn">Logout</a></li>
    <li><button id="themeToggle" class="theme-toggle">ðŸŒ™</button></li>
  </ul>
</nav>


<!-- MAIN CONTENT -->
<main class="container coin-page">

  <!-- COIN HEADER -->
  <header class="coin-header-top">
    <div class="coin-title">
      <div class="coin-avatar">B</div>
      <div>
        <h2 id="coinName">Bitcoin Details</h2>
        <div class="coin-sub">BTC â€¢ <span id="coinPrice">$67,234.52</span></div>
      </div>
    </div>

    <div class="controls">
      <select id="coinSelect">
        <option value="bitcoin">Bitcoin (BTC)</option>
        <option value="ethereum">Ethereum (ETH)</option>
        <option value="litecoin">Litecoin (LTC)</option>
        <option value="bnb">Binance Coin (BNB)</option>
        <option value="ripple">Ripple (XRP)</option>
      </select>

      <select id="horizonSelect">
        <option value="30">30 Days</option>
        <option value="60">60 Days</option>
        <option value="90">90 Days</option>
      </select>
    </div>
  </header>


  <!-- CHART CARD -->
  <section class="card chart-card">
    <div class="chart-top">
      <div class="chart-title">
        <strong>Price Chart with Predictions</strong>
        <div class="chart-legend small">Blue line: Actual price â€¢ Orange line: AI Predictions</div>
      </div>

      <div class="chart-actions">
        <div class="toggle-btns">
          <button id="btnMA" class="chip active">MA</button>
          <button id="btnBB" class="chip">Bollinger Bands</button>
        </div>

        <button id="downloadCsv" class="btn-ghost">Download CSV</button>
      </div>
    </div>

    <div class="chart-wrap">
      <canvas id="coinChart"></canvas>
    </div>
  </section>


  <!-- TABS -->
  <nav class="tabs">
    <button class="tab active" data-tab="technical">Technical Indicators</button>
    <button class="tab" data-tab="ohlc">OHLC Data</button>
    <button class="tab" data-tab="news">News & Sentiment</button>
  </nav>


  <!-- TECHNICAL INDICATORS -->
  <section id="technical" class="tab-content active card">
    <h3>Technical Indicators</h3>

    <div class="indicators-grid">
      <div class="indicator-card">
        <h4>Relative Strength Index (RSI)</h4>
        <canvas id="rsiChart" height="120"></canvas>
      </div>

      <div class="indicator-card">
        <h4>MACD</h4>
        <canvas id="macdChart" height="120"></canvas>
      </div>
    </div>
  </section>


  <!-- OHLC DATA -->
  <section id="ohlc" class="tab-content card">
    <h3>Historical OHLC Data</h3>
    <p class="small muted">Open, High, Low, Close prices and volume</p>

    <div class="table-wrap">
      <table id="ohlcTable">
        <thead>
          <tr>
            <th>Date</th><th>Open</th><th>High</th>
            <th>Low</th><th>Close</th><th>Volume</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>


  <!-- NEWS -->
  <section id="news" class="tab-content card">
    <h3>Latest News & Sentiment</h3>
    <p class="small muted">
      Recent news and market sentiment for <span id="newsCoin">Bitcoin</span>
    </p>

    <div id="newsList" class="news-list"></div>
  </section>


  <!-- FOOTER -->
  <footer class="footer">
    <p>Â© 2025 CryptoPulse. Powered by LSTM Neural Networks.</p>
    <p class="small">Data is for demonstration purposes only. Not financial advice.</p>
  </footer>

</main>

<div id="tooltip" class="tooltip" aria-hidden="true"></div>

<script src="coin-details.js"></script>

<script>
/* LOGIN CHECK */
document.addEventListener("DOMContentLoaded", () => {
  const isLoggedIn = localStorage.getItem("isLoggedIn");
  const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));

  if (isLoggedIn !== "true" || !loggedInUser) {
    window.location.href = "login.html";
    return;
  }

  const logoutBtn = document.getElementById("logoutBtn");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", (e) => {
      e.preventDefault();
      localStorage.removeItem("isLoggedIn");
      localStorage.removeItem("loggedInUser");
      window.location.href = "login.html";
    });
  }
});

/* FIX TAB SWITCHING */
document.querySelectorAll(".tab").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tab").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    document.querySelectorAll(".tab-content").forEach(sec => sec.classList.remove("active"));
    document.getElementById(btn.dataset.tab).classList.add("active");
  });
});
</script>

</body>
</html>
